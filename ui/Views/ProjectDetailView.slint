import { ProjectDetailRow, ProjectDetailRowTwoBoxes } from "../Widgets/ProjectDetailRow.slint";
import { VerticalBox, HorizontalBox, Button } from "std-widgets.slint";
import { TextField } from "../Widgets/TextField.slint";
import { ProjectModel } from "../models/ProjectModel.slint";
import { ProjectView } from "ProjectView.slint";
import { Constants } from "../Constants.slint";
import { MaterialDetailCard } from "../Widgets/MaterialDetailCard.slint";
import { Palette } from "../Palette.slint";
import { Appbar } from "../Widgets/Appbar.slint";
import { WMSAppbar } from "../Widgets/WMSAppbar.slint";


export component ProjectDetailView inherits VerticalLayout {
    in-out property <ProjectModel> project;
    in-out property <[string]> materialTypes;

    // TODO(jmeusel): kann wahrscheinlich weg, nicht sicher!
    // TODO(jmeusel): client, phone und email ben√∂tigen eigenes Feld und eigenen Screen 
    // in-out property <string> projectController:project.name;
    // in-out property <string> clientController:project.client;
    // in-out property <string> phoneController: project.tel;
    // in-out property <string> eMailController:project.email;
    // in-out property <string> projectStartController:project.project-start;
    // in-out property <string> deadlineController:project.project-deadline;
    // in-out property <string> calcCostsController:project.calculated-costs;
    // in-out property <string> currentCostsController:project.current-costs;

    property <string> suffix: ": ";
    property <length> topPadding: 20px;

    VerticalLayout {
        Rectangle {
            height: topPadding;
        }
        alignment: start;
        WMSAppbar {
            title: project.name;
        }
        HorizontalLayout {
            alignment: start;
            VerticalBox {
                Rectangle {
                    height: topPadding;
                }
                Rectangle {height: 20px;}
                alignment: start;
                ProjectDetailRow {
                    title: Constants.project_name;
                    textFieldName: project.name;
                }
                Rectangle {height: 20px;}
                ProjectDetailRow {
                    title: Constants.client + suffix;
                    textFieldName: project.client;
                }
                Rectangle {height: 20px;}
                ProjectDetailRowTwoBoxes {
                    title: Constants.phone + suffix;
                    textFieldName: project.tel;
                    title2: Constants.email + suffix;
                    textFieldName2: project.email;
                }
                Rectangle {height: 20px;}
                ProjectDetailRow {
                    title: Constants.project_start + suffix;
                    textFieldName: project.project-start;
                }
                Rectangle {height: 20px;}
                ProjectDetailRow {
                    title: Constants.project_deadline + suffix;
                    textFieldName: project.project-deadline;
                }
                Rectangle {height: 20px;}
                ProjectDetailRow {
                    title: Constants.calculated_costs + suffix;
                    textFieldName: project.calculated-costs;
                }
                Rectangle {height: 20px;}
                ProjectDetailRow {
                    title: Constants.currentCosts + suffix;
                    textFieldName: project.current-costs;
                }
        
            }
            Rectangle {width: 500px;}
            //Material Section
            VerticalLayout {
                Rectangle {height: topPadding;}
                Rectangle {
                    border-radius: 5px;
                    border-width: 1px;
                    border-color: Palette.accent-color;
                    drop-shadow-blur: 20px;
                    drop-shadow-color: Palette.control-color;
                    drop-shadow-offset-y: 1px;
                    VerticalBox {
                        for material[i] in project.mats: MaterialDetailCard {
                            materialName: project.mats[i].name;
                            count: project.mats[i].quantity;
                            materialTypes: materialTypes;
                            fontSizeMultiplier: 2px;

                            for name[index] in project.mats : Rectangle {height: 85px;}
                        }
                    }
                }
                Rectangle {height: 25px;}
                HorizontalLayout {
                    Button {
                        text: "add material";
                        height: 30px;
                        width: 130px;
                        callback addMaterial(
                            // TODO(jmeusel): implement
                        );
                    }
                    Rectangle {width: 45px;}
                    Button {
                        text: "Save";
                        height: 30px;
                        width: 130px;
                        callback save(
                            // TODO(jmeusel): implement
                        );
                    }
                }
            }
        }
    }
}
