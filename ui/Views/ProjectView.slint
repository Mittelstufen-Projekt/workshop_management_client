/*

    Author: Justin Rauch, Jasha Meusel
    Date: 2024-03-12
    Description: Main Project Overview for the Client

*/

// Importing Palette, Backend and Constants
import { Palette } from "../Palette.slint";
import { Backend } from "../Backend.slint";
import { Constants } from "../Constants.slint";

// Importing Standard Widgets
import { VerticalBox, HorizontalBox } from "std-widgets.slint";

// Importing selfmade Widgets
import { ToggleSwitch } from "../Widgets/ToggleSwitch.slint";
import { TextField } from "../Widgets/TextField.slint";
import { CheckBox } from "../Widgets/CheckBox.slint";
import { RowTest, RowBox } from "../Widgets/Rowtest.slint";
import { Button } from "../Widgets/Button.slint";
import { ProjectOverViewRowShort } from "../Widgets/ProjectOverViewRowShort.slint";
import { MaterialAlertShort } from "../Widgets/MaterialAlertShort.slint";
import { ProjectModel } from "../models/ProjectModel.slint";
import { Material } from "../models/MaterialModel.slint";

export component ProjectView inherits Rectangle {

    property <length> txt;
    txt: Palette.font-size * 1px;

    in-out property <[ProjectModel]> recentProjects;
    in-out property <[Material]> materialAlerts;
    VerticalBox {
        HorizontalBox {
            alignment: LayoutAlignment.end;
            Button {
                text: "Logout";
                clicked => {
                    Backend.request-logout();
                }
            }
        }

        HorizontalBox {
            VerticalBox {
                Button {
                    max-width: 300px;
                    text: Constants.project_management;
                    fontSizeMultiplier: 1.5px;
                }

                Button {
                    max-width: 300px;
                    text: Constants.warehouse_management;
                    fontSizeMultiplier: 1.5px;
                }
            }

            //Leeres Rectangle um das Alignment zu beeinflussen
            Rectangle { }

            Text {
                text: "Carpenter management\n             System";
                font-size: Palette.font-size * 1.5px;
            }

            Rectangle { }
        }

        HorizontalLayout {
            height: txt + 50px;
            // TODO(jmeusel): ändern
            padding-left: root.padding-left + 20px;
            HorizontalBox {
                Text {
                    text: Constants.latest_projects;
                    font-size: Palette.font-size * 1.5px;
                    vertical-alignment: center;
                    color: Palette.accent-color;
                }
            }

            // TODO(jmeusel): anders lösen (responsive)
            Rectangle {
                width: 250px;
            }

            HorizontalBox {
                Text {
                    text: Constants.mat_alert;
                    font-size: Palette.font-size * 1.5px;
                    color: Palette.accent-color;
                }
            }
        }

        // Als Referenz für die Schleifen nehmen
          HorizontalBox {
            VerticalBox {
                for item[i] in recentProjects: ProjectOverViewRowShort {
                    project: recentProjects[i].name;
                    client: recentProjects[i].client;
                    costs: recentProjects[i].current_costs;
                    deadline: recentProjects[i].project_deadline;
                }
                Rectangle { }
            }

            //Material Section
            VerticalBox {
                // TODO(jmeusel): IF-Statement um quantity mit alert zu vergleichen
                for material[i] in materialAlerts: 
                MaterialAlertShort {
                    materialName: materialAlerts[i].name;
                    count: materialAlerts[i].quantity;
                }

                Button {
                    fontSizeMultiplier: 1.5px;
                    text: Constants.show_more;
                    clicked => {
                        // TODO(jmeusel): implement route to MaterialAlert
                }
                }
            }
        }
    }
}

/*
  HorizontalBox {
        VerticalBox {
            HorizontalBox {
                VerticalBox {
                    width: root.width * 0.03;
                    height: root.width * 0.2;
                    Button {
                        text: "Project Overview";
                        height: 50px;
                        width: 300px;
                    }
                    Button {
                        text: "Warehouse Management";
                        height: 50px;
                        width: 300px;
                    }
                    Text {
                        text: "Latest Projects:";
                        font-size: Palette.font-size * 1px;
                        color: Palette.text-color;
                    }
                    VerticalBox {
                        RowTest {
                            project: "Project";
                            client: "client";
                            costs: "current costs";
                            deadline: "deadline";
                        }
                        RowTest {
                            project: "Project";
                            client: "client";
                            costs: "current costs";
                            deadline: "deadline";
                        }
                        RowTest {
                            project: "Project";
                            client: "client";
                            costs: "current costs";
                            deadline: "deadline";
                        }
                        RowBox {}
                    }
                }
                Text {
                    text: "Workshop Management \n              System";
                    color: Palette.text-color;
                    font-size: Palette.font-size * 1.2px;
                }
            }
        }
        VerticalBox {
            Button {
                text: "Logout";
            }
        }
    }
*/



